# Supabase Integration for Backend

This project uses Supabase for both authentication and database storage. This README explains how to set up Supabase for the backend.

## Prerequisites

1. Create a Supabase account at [supabase.com](https://supabase.com)
2. Create a new Supabase project

## Database Setup

1. Get your Supabase database connection details:
   - Go to your Supabase project dashboard
   - Navigate to Settings > Database
   - Find the "Connection string" section
   - Copy the connection details

2. Update your `.env` file with the following variables:
   ```
   SUPABASE_DB_URL=jdbc:postgresql://db.your-project-ref.supabase.co:5432/postgres
   SUPABASE_DB_USER=postgres
   SUPABASE_DB_PASSWORD=your-db-password
   ```

## Authentication Setup

1. Configure Supabase Authentication:
   - Go to your Supabase project dashboard
   - Navigate to Authentication > Settings
   - Enable Email/Password sign-in method
   - Configure any other authentication providers you want to use

2. Get your Supabase JWT secret:
   - Go to your Supabase project dashboard
   - Navigate to Settings > API
   - Copy the "JWT Secret" value

3. Update your `.env` file with the following variables:
   ```
   SUPABASE_PROJECT_URL=https://your-project-ref.supabase.co
   SUPABASE_JWT_SECRET=your-jwt-secret
   ```

## JWT Configuration

The application uses JWT for authentication. Update your `.env` file with the following variables:

```
JWT_SECRET=your-256-bit-secret
JWT_EXPIRATION=86400000
```

## Running the Application

With the above configuration in place, you can run the application using:

```bash
./mvnw spring-boot:run
```

## Important Notes

1. The application expects the Supabase database to have the necessary tables. The JPA entities will create these tables automatically if they don't exist.

2. The JWT configuration is used for generating and validating tokens for API access.

3. The Supabase JWT configuration is used for validating tokens generated by Supabase Authentication.

4. Make sure your Supabase database has the necessary permissions for the application to create and modify tables.

5. For local development, you can use the H2 in-memory database by modifying the `application.yml` file.
